/***************************************************************
 * copyright (c) 2009, gaocheng
 * all rights reserved.
 *
 * file name   : trace.c
 * version     : 1.0
 * description : 多线程跟踪、内存跟踪
 * author      : gaocheng
 * date        : 2011-04-22
 ***************************************************************/

/***************************************************************
 include header file
 ***************************************************************/
#include <core.h>
#include "trace.h"

/***************************************************************
 global variable declare
 ***************************************************************/

LOCALD volatile os_bool trace_switch _CPU_ALIGNED_ = OS_FALSE;

/***************************************************************
 function declare
 ***************************************************************/

/***************************************************************
 * description :
 * history     :
 ***************************************************************/
os_void start_trace(os_void)
{
    trace_switch = OS_TRUE;
}

/***************************************************************
 * description :
 * history     :
 ***************************************************************/
os_bool trace_is_ok(void)
{
    return trace_switch;
}

/***************************************************************
 * description :
 * history     :
 ***************************************************************/
os_void trace_str_info(const os_u8 *str)
{
    if (trace_switch) {
        flog("(%s)", str);
    }
}

/***************************************************************
 * description :
 * history     :
 ***************************************************************/
os_void trace_hex_info(const os_u32 hex)
{
    if (trace_switch) {
        flog("<%x>", hex);
    }
}

/***************************************************************
 * description :
 * history     :
 ***************************************************************/
os_void stop_trace(os_void)
{
    trace_switch = OS_FALSE;
}


/***************************************************************
 * copyright (c) 2009, gaocheng
 * all rights reserved.
 *
 * file name   : font.c
 * version     : 1.0
 * description : (key)
 * author      : gaocheng
 * date        : 2009-04-22
 ***************************************************************/

/***************************************************************
 include header file
 ***************************************************************/
#include <core.h>
#include "font.h"

/***************************************************************
 global variable declare
 ***************************************************************/

#define MAX_ASC 0x80

/* 点阵字体编码, ASCII(0x20-0x7f). 8x16 */
LOCALD const os_u8 bitmap_font_table[MAX_ASC][16] = {
    /* NUL(null) */
    {},
    /* SOH(start of headling) */
    {},
    /* STX (start of text) */
    {},
    /* ETX (end of text) */
    {},
    /* EOT (end of transmission) */
    {},
    /* ENQ (enquiry) */
    {},
    /* ACK (acknowledge) */
    {},
    /* BEL (bell) */
    {},
    /* BS (backspace) */
    {},
    /* HT (horizontal tab) */
    {},
    /* LF (NL line feed, new line) */
    {},
    /* VT (vertical tab) */
    {},
    /* FF (NP form feed, new page) */
    {},
    /* CR (carriage return) */
    {},
    /* SO (shift out) */
    {},
    /* SI (shift in) */
    {},
    /* DLE (data link escape) */
    {},
    /* DC1 (device control 1) */
    {},
    /* DC2 (device control 2) */
    {},
    /* DC3 (device control 3) */
    {},
    /* DC4 (device control 4) */
    {},
    /* NAK (negative acknowledge) */
    {},
    /* SYN (synchronous idle) */
    {},
    /* ETB (end of trans. block) */
    {},
    /* CAN (cancel) */
    {},
    /* EM (end of medium) */
    {},
    /* SUB (substitute) */
    {},
    /* ESC (escape) */
    {},
    /* FS (file separator) */
    {},
    /* GS (group separator) */
    {},
    /* RS (record separator) */
    {},
    /* US (unit separator) */
    {},
    /* space */
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
    /* ! */
    {0,0,0,0,0x08,0x08,0x08,0x08,0x08,0x08,0,0,0x08,0x08,0,0},
    /* " */
    {0,0,0,0,0x36,0x36,0x24,0x24,0,0,0,0,0,0,0,0},
    /* # */
    {0,0,0,0,0x12,0x12,0x24,0x7e,0x24,0x24,0x7e,0x24,0x48,0x48,0,0},
    /* $ */
    {0,0,0,0,0x08,0x1c,0x24,0x20,0x18,0x04,0x24,0x38,0x08,0x08,0,0},
    /* % */
    {0,0,0,0,0x18,0x24,0x24,0x18,0x3e,0x0c,0x12,0x12,0x0c,0,0,0},
    /* & */
    {0,0,0,0,0,0,0x1c,0x20,0x20,0x30,0x4c,0x48,0x36,0,0,0},
    /* ' */
    {0,0,0,0,0x08,0x08,0x08,0x08,0,0,0,0,0,0,0,0},
    /* ( */
    {0,0,0,0,0x04,0x04,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x04,0x04,0},
    /* ) */
    {0,0,0,0,0x20,0x20,0x20,0x10,0x10,0x10,0x10,0x10,0x20,0x20,0x20,0},
    /* * */
    {0,0,0,0,0x10,0x10,0x7c,0x10,0x28,0,0,0,0,0,0,0},
    /* + */
    {0,0,0,0,0,0x08,0x08,0x08,0x7f,0x08,0x08,0x08,0,0,0,0},
    /* , */
    {0,0,0,0,0,0,0,0,0,0,0,0x18,0x10,0x30,0x20,0},
    /* - */
    {0,0,0,0,0,0,0,0,0x7e,0,0,0,0,0,0,0},
    /* . */
    {0,0,0,0,0,0,0,0,0,0,0,0x18,0x18,0,0,0},
    /* / */
    {0,0,0,0x02,0x02,0x04,0x04,0x08,0x08,0x10,0x10,0x20,0x20,0x40,0x40,0},
    /* 0 */
    {0,0,0,0x18,0x24,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x24,0x18,0,0},
    /* 1 */
    {0,0,0,0x10,0x70,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x7c,0,0},
    /* 2 */
    {0,0,0,0x3c,0x42,0x42,0x42,0x04,0x04,0x08,0x10,0x20,0x42,0x7e,0,0},
    /* 3 */
    {0,0,0,0x3c,0x42,0x42,0x04,0x18,0x04,0x02,0x02,0x42,0x44,0x38,0,0},//3
    /* 4 */
    {0,0,0,0x04,0x0c,0x14,0x24,0x24,0x44,0x44,0x7e,0x04,0x04,0x1e,0,0},//4
    /* 5 */
    {0,0,0,0x7e,0x40,0x40,0x40,0x58,0x64,0x02,0x02,0x42,0x44,0x38,0,0},
    /* 6 */
    {0,0,0,0x1c,0x24,0x40,0x40,0x58,0x64,0x42,0x42,0x42,0x24,0x18,0,0},
    /* 7 */
    {0,0,0,0x7e,0x44,0x44,0x08,0x08,0x10,0x10,0x10,0x10,0x10,0x10,0,0},
    /* 8 */
    {0,0,0,0x3c,0x42,0x42,0x42,0x24,0x18,0x24,0x42,0x42,0x42,0x3c,0,0},
    /* 9 */
    {0,0,0,0x18,0x24,0x42,0x42,0x42,0x26,0x1a,0x02,0x02,0x24,0x38,0,0},
    /* : */
    {0,0,0,0,0,0,0,0x18,0x18,0,0,0x18,0x18,0,0,0},
    /* ; */
    {0,0,0,0,0,0,0,0x18,0x18,0,0,0x18,0x18,0x30,0x20,0},
    /* < */
    {0,0,0,0,0,0,0x03,0x0c,0x10,0x60,0x10,0x0c,0x03,0,0,0},
    /* = */
    {0,0,0,0,0,0,0xfe,0,0,0xfe,0,0,0,0,0,0},
    /* > */
    {0,0,0,0,0,0,0x60,0x18,0x04,0x03,0x04,0x18,0x60,0,0,0},
    /* ? */
    {0,0,0,0,0,0x38,0x44,0x04,0x04,0x08,0x10,0,0x18,0,0,0},
    /* @ */
    {0,0,0,0,0x1c,0x22,0x42,0x4e,0x52,0x52,0x4e,0x40,0x22,0x1c,0,0},
    /* A */
    {0,0,0,0,0,0x38,0x18,0x18,0x24,0x24,0x3c,0x42,0xe7,0,0,0},
    /* B */
    {0,0,0,0,0,0x7c,0x22,0x22,0x3c,0x22,0x22,0x22,0x7c,0,0,0},
    /* C */
    {0,0,0,0,0,0x1a,0x26,0x40,0x40,0x40,0x40,0x22,0x1c,0,0,0},
    /* D */
    {0,0,0,0,0,0x78,0x24,0x22,0x22,0x22,0x22,0x24,0x78,0,0,0},
    /* E */
    {0,0,0,0,0,0x7e,0x22,0x24,0x3c,0x24,0x20,0x22,0x7e,0,0,0},
    /* F */
    {0,0,0,0,0,0x7e,0x22,0x2a,0x38,0x28,0x20,0x20,0x78,0,0,0},
    /* G */
    {0,0,0,0,0,0x1a,0x26,0x40,0x40,0x4f,0x42,0x22,0x1c,0,0,0},
    /* H */
    {0,0,0,0,0,0x77,0x22,0x22,0x3e,0x22,0x22,0x22,0x77,0,0,0},
    /* I */
    {0,0,0,0,0,0x3e,0x08,0x08,0x08,0x08,0x08,0x08,0x3e,0,0,0},
    /* J */
    {0,0,0,0,0,0x3f,0x04,0x04,0x04,0x44,0x44,0x44,0x38,0,0,0},
    /* K */
    {0,0,0,0,0,0x77,0x24,0x28,0x30,0x38,0x24,0x22,0x73,0,0,0},
    /* L */
    {0,0,0,0,0,0xf8,0x20,0x20,0x20,0x22,0x22,0x22,0xfe,0,0,0},
    /* M */
    {0,0,0,0,0,0xe3,0x63,0x55,0x55,0x55,0x49,0x41,0xe3,0,0,0},
    /* N */
    {0,0,0,0,0,0x77,0x32,0x32,0x2a,0x2a,0x2a,0x26,0x76,0,0,0},
    /* O */
    {0,0,0,0,0,0x1c,0x22,0x41,0x41,0x41,0x41,0x22,0x1c,0,0,0},
    /* P */
    {0,0,0,0,0,0x7c,0x22,0x22,0x22,0x3c,0x20,0x20,0x78,0,0,0},
    /* Q */
    {0,0,0,0,0,0x1c,0x22,0x41,0x41,0x41,0x41,0x22,0x1c,0x1f,0,0},
    /* R */
    {0,0,0,0,0,0x7c,0x22,0x22,0x22,0x3c,0x24,0x22,0x71,0,0,0},
    /* S */
    {0,0,0,0,0,0x3a,0x46,0x40,0x3c,0x02,0x02,0x62,0x5c,0,0,0},
    /* T */
    {0,0,0,0,0,0x7f,0x49,0x49,0x08,0x08,0x08,0x08,0x3e,0,0,0},
    /* U */
    {0,0,0,0,0,0xe7,0x22,0x22,0x22,0x22,0x22,0x22,0x1c,0,0,0},
    /* V */
    {0,0,0,0,0,0xe7,0x42,0x24,0x24,0x24,0x18,0x18,0x18,0,0,0},
    /* W */
    {0,0,0,0,0,0xe3,0x41,0x49,0x49,0x55,0x55,0x55,0x22,0,0,0},
    /* X */
    {0,0,0,0,0,0xe7,0x22,0x14,0x08,0x08,0x14,0x22,0xe7,0,0,0},
    /* Y */
    {0,0,0,0,0,0xe7,0x22,0x14,0x14,0x08,0x08,0x08,0x3e,0,0,0},
    /* Z */
    {0,0,0,0,0,0x7e,0x42,0x04,0x08,0x10,0x22,0x42,0x7e,0,0,0},
    /* [ */
    {0,0,0,0,0x1c,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x1c,0},
    /* \ */
    {0,0,0,0x40,0x20,0x20,0x20,0x10,0x10,0x08,0x08,0x04,0x04,0x04,0,0},
    /* ] */
    {0,0,0,0,0x38,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x38,0},
    /* ^ */
    {0,0,0,0,0x10,0x10,0x28,0x44,0,0,0,0,0,0,0,0},
    /* _ */
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0xff,0},
    /* ` */
    {0,0,0,0,0x10,0x08,0,0,0,0,0,0,0,0,0,0},
    /* a */
    {0,0,0,0,0,0,0,0x3c,0x42,0x1e,0x22,0x42,0x42,0x3f,0,0},
    /* b */
    {0,0,0,0xc0,0x40,0x40,0x40,0x58,0x64,0x42,0x42,0x42,0x64,0x58,0,0},
    /* c */
    {0,0,0,0,0,0,0,0x1c,0x22,0x40,0x40,0x40,0x22,0x1c,0,0},
    /* d */
    {0,0,0,0x06,0x02,0x02,0x02,0x1e,0x22,0x42,0x42,0x42,0x26,0x1b,0,0},
    /* e */
    {0,0,0,0,0,0,0,0x3c,0x42,0x7e,0x40,0x40,0x42,0x3c,0,0},
    /* f */
    {0,0,0,0x0f,0x11,0x10,0x10,0x7e,0x10,0x10,0x10,0x10,0x10,0x7c,0,0},
    /* g */
    {0,0,0,0,0,0,0,0x3e,0x44,0x44,0x38,0x40,0x3c,0x42,0x42,0x3c},
    /* h */
    {0,0,0,0xc0,0x40,0x40,0x40,0x5c,0x62,0x42,0x42,0x42,0x42,0xc7,0,0},
    /* i */
    {0,0,0,0x30,0x30,0,0,0x70,0x10,0x10,0x10,0x10,0x10,0x7c,0,0},
    /* j */
    {0,0,0,0x0c,0x0c,0,0,0x1c,0x04,0x04,0x04,0x04,0x04,0x04,0x44,0x78},
    /* k */
    {0,0,0,0xc0,0x40,0x40,0x40,0x4e,0x48,0x50,0x68,0x48,0x44,0xee,0,0},
    /* l */
    {0,0,0,0x70,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x7c,0,0},
    /* m */
    {0,0,0,0,0,0,0,0xfe,0x49,0x49,0x49,0x49,0x49,0xed,0,0},
    /* n */
    {0,0,0,0,0,0,0,0xdc,0x62,0x42,0x42,0x42,0x42,0xe7,0,0},
    /* o */
    {0,0,0,0,0,0,0,0x3c,0x42,0x42,0x42,0x42,0x42,0x3c,0,0},
    /* p */
    {0,0,0,0,0,0,0,0xd8,0x64,0x42,0x42,0x42,0x44,0x78,0x40,0xe0},
    /* q */
    {0,0,0,0,0,0,0,0x1e,0x22,0x42,0x42,0x42,0x22,0x1e,0x02,0x07},
    /* r */
    {0,0,0,0,0,0,0,0xee,0x32,0x20,0x20,0x20,0x20,0xf8,0,0},
    /* s */
    {0,0,0,0,0,0,0,0x3e,0x42,0x40,0x3c,0x02,0x42,0x7c,0,0},
    /* t */
    {0,0,0,0,0,0x10,0x10,0x7c,0x10,0x10,0x10,0x10,0x10,0x0c,0,0},
    /* u */
    {0,0,0,0,0,0,0,0xc6,0x42,0x42,0x42,0x42,0x46,0x3b,0,0},
    /* v */
    {0,0,0,0,0,0,0,0xe7,0x42,0x24,0x24,0x28,0x10,0x10,0,0},
    /* w */
    {0,0,0,0,0,0,0,0xd7,0x92,0x92,0xaa,0xaa,0x44,0x44,0,0},
    /* x */
    {0,0,0,0,0,0,0,0x6e,0x24,0x18,0x18,0x18,0x24,0x76,0,0},
    /* y */
    {0,0,0,0,0,0,0,0xe7,0x42,0x24,0x24,0x28,0x18,0x10,0x10,0xe0},
    /* z */
    {0,0,0,0,0,0,0,0x7e,0x44,0x08,0x10,0x10,0x22,0x7e,0,0},
    /* { */
    {0,0,0,0,0x04,0x08,0x08,0x08,0x08,0x10,0x08,0x08,0x08,0x08,0x04,0},
    /* | */
    {0,0,0,0,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0,0},
    /* } */
    {0,0,0,0,0x20,0x10,0x10,0x10,0x10,0x08,0x10,0x10,0x10,0x10,0x20,0},
    /* ~ */
    {0,0,0,0,0,0,0,0,0x32,0x4c,0,0,0,0,0,0},
    /* DEL(delete) */
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}
};

/* 矢量字体编码 */
LOCALD const os_u8 vector_font_table[][8] = {};

/***************************************************************
 function declare
 ***************************************************************/
/***************************************************************
 * description : 显示ASCII, 坐标的参数检查在上一层函数完成.
 * history     :
 ***************************************************************/
inline os_ret print_asc(os_u32 asc, screen_csys p, enum vga_color color)
{
    os_u32 i, j;
    os_u8 row_pix;
    os_u8 mask;

    /* 异常保护 */
    if (MAX_ASC > asc) {
        /* 16行 */
        for(i = 0; i < 16; i++) {
            mask = 0x80;

            /* 8列 */
            for(j = 0; j < 8; j++) {
                row_pix = bitmap_font_table[asc][i] & mask;

                /* 写像素点 */
                if(row_pix) {
                    p.x = p.x + j;
                    draw_point(&p, color);
                    p.x = p.x - j;
                }

                mask = mask >> 1;
            }
            p.y++;
        }
        return OS_SUCC;
    }
    return OS_FAIL;
}


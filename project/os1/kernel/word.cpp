
#include<types.h>

extern void write_pix(int x,int y,int color);
extern void disp_color(int begx,int begy,int endx,int endy,int color);

//char key_make_code[0x27+0xa]={"1234567890qwertyuiop[]ECasdfghjkl;'`S\\zxcvbnm,./"};
bit_8 key_make_code_g[0x27+0xa+1+1][16]=
{
      {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},//null
      {0,0,0,0x10,0x70,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x7c,0,0},//1
      {0,0,0,0x3c,0x42,0x42,0x42,0x04,0x04,0x08,0x10,0x20,0x42,0x7e,0,0},//2
      {0,0,0,0x3c,0x42,0x42,0x04,0x18,0x04,0x02,0x02,0x42,0x44,0x38,0,0},//3
      {0,0,0,0x04,0x0c,0x14,0x24,0x24,0x44,0x44,0x7e,0x04,0x04,0x1e,0,0},//4
      {0,0,0,0x7e,0x40,0x40,0x40,0x58,0x64,0x02,0x02,0x42,0x44,0x38,0,0},//5
      {0,0,0,0x1c,0x24,0x40,0x40,0x58,0x64,0x42,0x42,0x42,0x24,0x18,0,0},//6
      {0,0,0,0x7e,0x44,0x44,0x08,0x08,0x10,0x10,0x10,0x10,0x10,0x10,0,0},//7
      {0,0,0,0x3c,0x42,0x42,0x42,0x24,0x18,0x24,0x42,0x42,0x42,0x3c,0,0},//8
      {0,0,0,0x18,0x24,0x42,0x42,0x42,0x26,0x1a,0x02,0x02,0x24,0x38,0,0},//9
      {0,0,0,0x18,0x24,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x24,0x18,0,0},//0
      {0,0,0,0,0,0,0,0x1e,0x22,0x42,0x42,0x42,0x22,0x1e,0x02,0x07},//q
      {0,0,0,0,0,0,0,0xd7,0x92,0x92,0xaa,0xaa,0x44,0x44,0,0},//w
      {0,0,0,0,0,0,0,0x3c,0x42,0x7e,0x40,0x40,0x42,0x3c,0,0},//e
      {0,0,0,0,0,0,0,0xee,0x32,0x20,0x20,0x20,0x20,0xf8,0,0},//r
      {0,0,0,0,0,0x10,0x10,0x7c,0x10,0x10,0x10,0x10,0x10,0x0c,0,0},//t
      {0,0,0,0,0,0,0,0xe7,0x42,0x24,0x24,0x28,0x18,0x10,0x10,0xe0},//y
      {0,0,0,0,0,0,0,0xc6,0x42,0x42,0x42,0x42,0x46,0x3b,0,0},//u
      {0,0,0,0x30,0x30,0,0,0x70,0x10,0x10,0x10,0x10,0x10,0x7c,0,0},//i
      {0,0,0,0,0,0,0,0x3c,0x42,0x42,0x42,0x42,0x42,0x3c,0,0},//o
      {0,0,0,0,0,0,0,0xd8,0x64,0x42,0x42,0x42,0x44,0x78,0x40,0xe0},//p
      {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},//[
      {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},//]
      {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},//enter
      {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},//ctrl
      {0,0,0,0,0,0,0,0x3c,0x42,0x1e,0x22,0x42,0x42,0x3f,0,0},//a
      {0,0,0,0,0,0,0,0x3e,0x42,0x40,0x3c,0x02,0x42,0x7c,0,0},//s
      {0,0,0,0x06,0x02,0x02,0x02,0x1e,0x22,0x42,0x42,0x42,0x26,0x1b,0,0},//d
      {0,0,0,0x0f,0x11,0x10,0x10,0x7e,0x10,0x10,0x10,0x10,0x10,0x7c,0,0},//f
      {0,0,0,0,0,0,0,0x3e,0x44,0x44,0x38,0x40,0x3c,0x42,0x42,0x3c},//g
      {0,0,0,0xc0,0x40,0x40,0x40,0x5c,0x62,0x42,0x42,0x42,0x42,0xc7,0,0},//h
      {0,0,0,0x0c,0x0c,0,0,0x1c,0x04,0x04,0x04,0x04,0x04,0x04,0x44,0x78},//j
      {0,0,0,0xc0,0x40,0x40,0x40,0x4e,0x48,0x50,0x68,0x48,0x44,0xee,0,0},//k
      {0,0,0,0x70,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x7c,0,0},//l
      {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},//;
      {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},//'
      {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},//~
      {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},//shift
      {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},//\
      {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},//unkown
      {0,0,0,0,0,0,0,0x7e,0x44,0x08,0x10,0x10,0x22,0x7e,0,0},//z
      {0,0,0,0,0,0,0,0x6e,0x24,0x18,0x18,0x18,0x24,0x76,0,0},//x
      {0,0,0,0,0,0,0,0x1c,0x22,0x40,0x40,0x40,0x22,0x1c,0,0},//c
      {0,0,0,0,0,0,0,0xe7,0x42,0x24,0x24,0x28,0x10,0x10,0,0},//v
      {0,0,0,0xc0,0x40,0x40,0x40,0x58,0x64,0x42,0x42,0x42,0x64,0x58,0,0},//b
      {0,0,0,0,0,0,0,0xdc,0x62,0x42,0x42,0x42,0x42,0xe7,0,0},//n
      {0,0,0,0,0,0,0,0xfe,0x49,0x49,0x49,0x49,0x49,0xed,0,0},//m
      {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},//,
      {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},//.
      {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},///
};

void print_char_g(int offset,int x,int y,int color)//ÏñËØ×ø±ê
{
     int i,j,t;
     char mode;
     for(i=0;i<16;i++)
     {
                      mode=0x80;
                      for(j=0;j<8;j++)
                      {
                                      t=key_make_code_g[offset][i]&mode;
                                      if(t)//write
                                      {write_pix(x+j,y,color);}
                                      else
                                      {;}
                                      mode=(mode>>1)&0x7f;
                      }
                      y++;
     }
}

void repaint_window(int begx,int begy,int endx,int endy,int color)
{
     disp_color(begx,begy,endx,endy,color);
}

int note_book(int begx,int begy,int endx,int endy,int offset,int char_pos,int back_color)
{
    int x,y;
    y=char_pos/20;
    x=char_pos%20;
    y=y*16;
    x=x*8;
    print_char_g(offset,begx+x,begy+y,15);
    if(char_pos<199)
    return ++char_pos;
    else
    {
        repaint_window(begx,begy,endx,endy,back_color);
        return 2;
    }
}

